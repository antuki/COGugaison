<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Effectuer un diagnostic sur le COG présent dans une base de données — diag_COG • COGugaison</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Effectuer un diagnostic sur le COG présent dans une base de données — diag_COG"><meta property="og:description" content="Effectuer un diagnostic sur le COG présent dans une base de données"><meta property="og:image" content="https://antuki.github.io/COGugaison/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">COGugaison</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/COGugaison.html">Introduction à COGugaison</a>
</li>
<li>
  <a href="../reference/index.html">Documentation des fonctions</a>
</li>
<li>
  <a href="../news/index.html">Nouveautés</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="http://github.com/antuki/COGugaison/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Effectuer un diagnostic sur le COG présent dans une base de données</h1>
    <small class="dont-index">Source: <a href="http://github.com/antuki/COGugaison/blob/HEAD/R/diag_COG.R" class="external-link"><code>R/diag_COG.R</code></a></small>
    <div class="hidden name"><code>diag_COG.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Effectuer un diagnostic sur le COG présent dans une base de données</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">diag_COG</span><span class="op">(</span></span>
<span>  <span class="va">table_entree</span>,</span>
<span>  codgeo_entree <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">table_entree</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>  ign_na <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  id_doubl <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  hypothese_COG <span class="op">=</span> <span class="va">annee_ref</span>,</span>
<span>  table_diagnostic <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>table_entree</dt>
<dd><p>correspond à la table à diagnostiquer (ajout de la colonne de diagnostic au tableau en entrée, nouveaux paramètres optionnels ign_na et id_doubl, simplification du diagnostic)</p></dd>


<dt>codgeo_entree</dt>
<dd><p>est une chaîne de caractères qui indique le nom de la variable contenant les codes Insee communaux. Par défaut, il s'agit du nom de la première colonne de table_entree.</p></dd>


<dt>ign_na</dt>
<dd><p>vaut TRUE si on souhaite ignorer les codes manquants. Valeur FALSE par défaut.</p></dd>


<dt>id_doubl</dt>
<dd><p>vaut TRUE si on souhaite ajouter une colonne d'identification des codes en double à l'export. Valeur FALSE par défaut.</p></dd>


<dt>hypothese_COG</dt>
<dd><p>(optionnelle) hypothèse formulée par l'utilisateur concernant l'année de référence de COG supposée de la base de données. Le diagnostic sera alors effectué par rapport à cette année de COG. vaut annee_ref (COG le plus récent) par défaut.</p></dd>


<dt>table_diagnostic</dt>
<dd><p>vaut TRUE si on souhaite obtenir en sortie une table avec un diagnostic de COG pour chaque ligne. vaut TRUE par défaut.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>Le code officiel géographique le plus récent du package est actuellement celui au 01/01/2024. <br></p>
<p>Les millésimes des COG qui peuvent être utilisés sont à ce stade les suivants : 1968, 1975, 1982, 1990, 1999, annuel à partir de 2008. <br></p>
<p>Les dates de référence des codes officiels géographiques utilisés dans COGugaison sont les suivantes :</p><ul><li><p>COG 1968 : à partir du 01/03/1968</p></li>
<li><p>COG 1975 : à partir du 20/02/1975</p></li>
<li><p>COG 1982 : à partir du 04/03/1982</p></li>
<li><p>COG 1990 : à partir du 05/03/1990</p></li>
<li><p>COG 1999 : à partir du 08/03/1999</p></li>
<li><p>Pour tous les autres COG : à partir du 01/01 de chaque année</p></li>
</ul><p><br></p>
<p>Les différences entre les tables de passage Insee et non Insee sont les suivantes :<br></p><ul><li><p>1982-03-03 (pris en compte par l'Insee seulement après le 04/03/1982): Flaignes-Havys (08169) est un rassemblement de Flaignes-Havys (08169), Havys (08221) [fusion simple].</p></li>
<li><p>2014-01-01 (pris en compte par l'Insee seulement au 01/01/2015) : Loisey (55298) s'est séparée en Loisey (55298), Culey (55138) [rétablissement].</p></li>
<li><p>1990-02-01 (pris en compte par l'Insee seulement après le 05/03/1990) : Le code commune de Oudon passe de 14624 à 14697 [changement de code dû à un changement de chef-lieu].</p></li>
<li><p>2014-01-07 (pris en compte par l'Insee  dès le 01/01/2016) : Tôtes est rattachée à Notre-Dame-de-Fresnay qui devient L'Oudon (changement de code de l'Oudon de 14697 à 14472) [transfert de chef-lieu].</p></li>
<li><p>1981-09-28 (pris en compte par l'Insee  dès le 20/02/1975) : Vaudreuil-Ex-Ensemble Urbain (27701) est créée à partir des parcelles d'Incarville (27351), de Léry (27365) , de Porte-Joie (27471) , de Poses  (27474) , de Saint-Étienne-du-Vauvray (27537), de Saint-Pierre-du-Vauvray (27598), de Tournedos-sur-Seine  (27651) et du Vaudreuil (27528) [création]. Cette situation étant complexe, nous avons pour le moment considéré que Vaudreuil-Ex-Ensemble Urbain (27701) est créée à partir de parcelles du Vaudreuil (27528) uniquement.</p></li>
<li><p>En 1968, les 4 communes qui auraient dû d'après le COG être codées 2B044,2B076,2B151 et 2A325 sont codées 20044,20076,20151 et 20325 dans les données Insee.</p></li>
</ul></div>
    <div id="references">
    <h2>References</h2>
    
<ul><li><p><a href="https://www.insee.fr/fr/information/2666684#titre-bloc-11" class="external-link">historique des géographies communales (Insee)</a></p></li>
<li><p><a href="https://www.insee.fr/fr/information/2028028" class="external-link">tables d'appartenance des communes aux différents niveaux géographiques (Insee)</a></p></li>
</ul></div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><a href="COG_akinator.html">COG_akinator</a>, <a href="enlever_PLM.html">enlever_PLM</a>, <a href="trajectoire_commune.html">trajectoire_commune</a></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## Exemple 1</span></span></span>
<span class="r-in"><span><span class="co"># Exemple d'une table dont le COG est au carré</span></span></span>
<span class="r-in"><span><span class="va">sortie</span> <span class="op">&lt;-</span> <span class="fu">diag_COG</span><span class="op">(</span><span class="va">COG2010</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "# ------------------------------"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "# DIAGNOSTIC DE COG"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "# ------------------------------"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "# Synthèse"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "# COG2010"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "# ------------------------------"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "# Diagnostic détaillé"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "# Le fichier compte 36699 codes communes."</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "# Le diagnostic de COG correspond au COG le plus récent dans lequel l'ensemble des codes communes du fichier en entrée sont présents."</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |              | Nombre d'observations|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |:-------------|---------------------:|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |COG2010       |                 36699|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |codes uniques |                 36699|</span>
<span class="r-in"><span><span class="co">## Exemple 2</span></span></span>
<span class="r-in"><span><span class="co"># Exemple d'une table qui mix plusieurs COG</span></span></span>
<span class="r-in"><span> <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: ‘dplyr’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:stats’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     filter, lag</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:base’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     intersect, setdiff, setequal, union</span>
<span class="r-in"><span> <span class="va">table_fictive</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">COG2014</span>,<span class="va">COG2015</span>,<span class="va">COG2013</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">CODGEO</span>, .keep_all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/add_row.html" class="external-link">add_row</a></span><span class="op">(</span>CODGEO <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"01001"</span>,<span class="fl">5</span><span class="op">)</span>,<span class="st">"75101"</span>,<span class="cn">NA</span>,<span class="st">"98756"</span>,<span class="st">"ZZZZZ"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="co"># Sans hypothèse préalable sur le COG probable de la table</span></span></span>
<span class="r-in"><span> <span class="va">sortie</span> <span class="op">&lt;-</span> <span class="fu">diag_COG</span><span class="op">(</span><span class="va">table_fictive</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "# ------------------------------"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "# DIAGNOSTIC DE COG"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "# ------------------------------"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "# Synthèse"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "# COG non identifiable"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "# ------------------------------"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "# Diagnostic détaillé"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "# Le fichier compte 36693 codes communes."</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "# Dans la mesure où le COG n'est pas identifiable, pour chaque commune considérée, le diagnostic de COG correspond au COG le plus récent qui contient son code commune."</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |                         | Nombre d'observations|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |:------------------------|---------------------:|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |2024                     |                 34939|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |2015                     |                   771|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |2016                     |                   468|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |2018                     |                   386|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |2017                     |                    59|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |2014                     |                    25|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |2023                     |                    13|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |2022                     |                    11|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |2021                     |                    10|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |2019                     |                     3|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |2020                     |                     3|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |2013                     |                     1|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |arrondissement municipal |                     1|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |code indéterminé         |                     1|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |code manquant            |                     1|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |collectivité d'outre-mer |                     1|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |codes uniques            |                 36688|</span>
<span class="r-in"><span> <span class="co"># En ayant une hypothèse préalable sur le COG de sortie de la table</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="COG_akinator.html">COG_akinator</a></span><span class="op">(</span><span class="va">table_fictive</span><span class="op">$</span><span class="va">CODGEO</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NULL</span>
<span class="r-in"><span> <span class="va">sortie</span> <span class="op">&lt;-</span> <span class="fu">diag_COG</span><span class="op">(</span><span class="va">table_fictive</span>, hypothese_COG <span class="op">=</span> <span class="fl">2013</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "# ------------------------------"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "# DIAGNOSTIC DE COG"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "# ------------------------------"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "# Synthèse"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "# COG non identifiable"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "# ------------------------------"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "# Diagnostic détaillé"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "# Le fichier compte 36693 codes communes."</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "# Dans la mesure où le COG n'est pas identifiable, pour chaque commune considérée, le diagnostic de COG correspond au COG le plus proche de l'année de référence (2013) qui contient son code commune."</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |                         | Nombre d'observations|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |:------------------------|---------------------:|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |2013                     |                 36686|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |2014                     |                     2|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |2015                     |                     1|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |arrondissement municipal |                     1|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |code indéterminé         |                     1|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |code manquant            |                     1|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |collectivité d'outre-mer |                     1|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |codes uniques            |                 36688|</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Kim Antunez.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

